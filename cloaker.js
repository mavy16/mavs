let inFrame

try {
    inFrame = window !== top
} catch (e) {
    inFrame = true
}

if (!inFrame && !navigator.userAgent.includes("Firefox")) {
    const popup = open("about:blank", "_blank")
    if (!popup || popup.closed) {
        alert("Allow popups and redirects to hide this from showing up in your history.")
    } else {
        const doc = popup.document
        const iframe = doc.createElement("iframe")
        const style = iframe.style
        const link = doc.createElement("link")

        doc.title = "Canvas-Dashboard"
        link.rel = "icon";
        link.href = "data:image/jpeg;base64,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";
        iframe.src = location.href
        style.position = "fixed"
        style.top = style.bottom = style.left = style.right = 0
        style.border = style.outline = "none"
        style.width = style.height = "100%"

        doc.body.appendChild(iframe)
        location.replace("https://canvas.instructure.com/")
    }
}

